<% content_for :title, "Create Test Suite" %>
<% content_for :breadcrumbs do %>
  <li>Manual Testing</li>
  <li><%= link_to "Test Suites", manual_testing_test_suites_path, class: "text-primary hover:text-primary-focus" %></li>
  <li class="text-secondary font-semibold">New Test Suite</li>
<% end %>

<div class="space-y-6">
  <!-- Header -->
  <div class="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4">
    <div>
      <h1 class="text-3xl font-bold text-secondary">Create New Test Suite</h1>
      <p class="text-base-content/70 mt-1">Organize your test cases into a manageable suite</p>
    </div>
    <div class="flex gap-2">
      <%= link_to manual_testing_test_suites_path, 
          class: "btn btn-outline gap-2" do %>
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
        </svg>
        Back to Test Suites
      <% end %>
    </div>
  </div>

  <!-- Form -->
  <div class="card bg-base-100 shadow-xl">
    <div class="card-body">
      <%= form_with model: @test_suite, url: manual_testing_test_suites_path, local: true, class: "space-y-6" do |form| %>
        
        <% if @test_suite.errors.any? %>
          <div class="alert alert-error shadow-lg">
            <div>
              <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current flex-shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              <div>
                <h3 class="font-bold">There were <%= pluralize(@test_suite.errors.count, "error") %> with your submission:</h3>
                <ul class="list-disc list-inside mt-2">
                  <% @test_suite.errors.full_messages.each do |message| %>
                    <li><%= message %></li>
                  <% end %>
                </ul>
              </div>
            </div>
          </div>
        <% end %>

        <!-- Basic Information -->
        <div class="space-y-4">
          <div class="flex items-center gap-3">
            <div class="w-8 h-8 bg-primary text-primary-content rounded-full flex items-center justify-center font-bold">1</div>
            <h3 class="text-xl font-semibold">Basic Information</h3>
          </div>

          <div class="pl-11 space-y-4">
            <!-- Name -->
            <div class="form-control">
              <label class="label">
                <span class="label-text text-base font-semibold">
                  Suite Name <span class="text-error">*</span>
                </span>
              </label>
              <%= form.text_field :name, 
                  class: "input input-bordered w-full #{'input-error' if @test_suite.errors[:name].any?}", 
                  placeholder: "e.g., Login & Authentication Tests",
                  data: { testid: "test-suite-name" } %>
              <% if @test_suite.errors[:name].any? %>
                <label class="label">
                  <span class="label-text-alt text-error"><%= @test_suite.errors[:name].first %></span>
                </label>
              <% end %>
            </div>

            <!-- Description -->
            <div class="form-control">
              <label class="label">
                <span class="label-text text-base font-semibold">Description</span>
                <span class="label-text-alt text-base-content/60">Optional</span>
              </label>
              <%= form.textarea :description, 
                  class: "textarea textarea-bordered w-full h-24 #{'textarea-error' if @test_suite.errors[:description].any?}", 
                  placeholder: "Brief description of what this test suite covers...",
                  data: { testid: "test-suite-description" } %>
              <% if @test_suite.errors[:description].any? %>
                <label class="label">
                  <span class="label-text-alt text-error"><%= @test_suite.errors[:description].first %></span>
                </label>
              <% end %>
              <label class="label">
                <span class="label-text-alt text-base-content/60">Maximum 500 characters</span>
              </label>
            </div>
          </div>
        </div>

        <!-- Actions -->
        <div class="flex flex-col sm:flex-row gap-4 pt-6 border-t border-base-300">
          <%= form.submit "Create Test Suite", 
              class: "btn btn-primary gap-2 flex-1 sm:flex-none",
              data: { testid: "create-test-suite-btn" } do %>
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
            </svg>
            Create Test Suite
          <% end %>
          <%= link_to manual_testing_test_suites_path, 
              class: "btn btn-ghost gap-2 flex-1 sm:flex-none" do %>
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
            Cancel
          <% end %>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Help Information -->
  <div class="card bg-base-200 shadow">
    <div class="card-body">
      <h3 class="card-title text-lg">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-info" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        About Test Suites
      </h3>
      <div class="text-sm space-y-2">
        <p>Test suites help you organize related test cases together, making it easier to manage and execute your manual testing workflows.</p>
        <ul class="list-disc list-inside space-y-1 text-base-content/80">
          <li>Group related test cases by feature, component, or testing phase</li>
          <li>Test cases can exist without being in a suite</li>
          <li>Deleting a suite won't delete the test cases - they'll just become unorganized</li>
          <li>You can move test cases between suites at any time</li>
        </ul>
      </div>
    </div>
  </div>
</div>
